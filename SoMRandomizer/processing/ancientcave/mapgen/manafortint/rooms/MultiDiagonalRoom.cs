using System;

namespace SoMRandomizer.processing.ancientcave.mapgen.manafortint.rooms
{
    /// <summary>
    /// Another diagonal shaped manafort room.
    /// </summary>
    /// 
    /// <remarks>Author: Moppleton</remarks>
    public class MultiDiagonalRoom : ManafortRoomMaker
    {
        static byte[] baseRoom = new byte[] {
                 91,  91,  91,  91,  91,  91, 135, 174,  80, 174, 174,  81, 174, 136,  91,  91,  91,  91,  91,  91,
                 92,  92,  92,  92,  92, 135,  99, 147,  96, 147, 147,  97, 147,  98, 136,  92,  92,  92,  92,  92,
                 78,  78, 135, 174, 174,  99,  96, 114, 112, 114, 116, 113, 116,  96,  98, 174, 174, 136,  78,  78,
                 95, 135,  99, 147, 147,  96, 112, 150, 128, 130, 132, 129, 134, 112,  96, 147, 147,  98, 136,  95,
                 95, 159,  96, 114, 116, 112, 128, 165, 144, 146, 146, 145, 165, 128, 112, 114, 116,  96, 157,  76,
                 95, 159, 112, 130, 132, 128, 144,  10, 161,  11,  11, 162,  12, 144, 128, 130, 132, 112, 157, 107,
                 95, 159, 128, 146, 146, 144, 161,  44,  26,   3,   4,  28,  42, 162, 144, 146, 146, 128, 157,  77,
                 95, 159, 144,  10,  11, 160,  44,  35,  26,  19,  20,  28,  35,  42, 160,  43,  12, 144, 157, 108,
                 95, 159, 161,  44,  35,  35,  35,  15,  10,  12,  10,  12,  15,  35,  35,  35,  42, 162, 157, 106,
                 95, 159,  35,  35,  15,  15,  15,  10,  43,  44,  42,  43,  12,  15,  15,  15,  35,  35, 157,  95,
                 95, 159,  10,  12,  15,  15,  10,  43,  44,  35,  35,  42,  43,  12,  15,  15,  10,  12, 157,  91,
                 95, 159,  42,  43,  12,  10,  43,  44,  35,  15,  15,  35,  42,  43,  12,  10,  43,  44, 157,  92,
                 95, 159,  35,  42,  10,  43,  44,  12,  15,  15,  15,  15,  35,  42,  43,  12,  44,  35, 157,  78,
                 95, 159,  15,  10,  43,  44,  42,  43,  12,  15,  15,  10,  43,  44,  42,  43,  12,  15, 157,  95,
                 95, 159,  10,  43,  44,  35,  35,  42,  43,  12,  10,  43,  44,  35,  35,  42,  43,  12, 157,  76,
                 95, 159,  42,  44,  35,  15,  15,  35,  42,  44,  42,  44,  35,  15,  15,  35,  42,  44, 157, 107,
                 95, 159,  44,  35,  15,  15,  15,  15,  35,  42,  44,  35,  15,  15,  15,  15,  35,  42, 157,  77,
                 77, 151, 139, 139, 139, 143,  15,  15,  15,  35,  35,  15,  15,  15, 141, 139, 139, 139, 152,  77,
                108, 108, 108, 108, 108, 151, 139, 139, 139, 139, 139, 139, 139, 139, 152, 108, 108, 108, 108, 108,
                 95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,  95,
            };

        // 0, 3
        static byte[] leftPassage = new byte[]
        {
                174,  99,
                147,  96,
                114, 112,
                130, 129,
                146, 145,
                 43, 161,
                 35,  35,
                 10,  44,
                 10,  12,
                 10,  44,
                 10,  12,
                 10,  44,
                 10,  12,
                 10,  44,
                142, 142,
        };

        // 18, 3
        static byte[] rightPassage = new byte[]
        {
                 98, 174,
                 96, 147,
                112, 144,
                128, 130,
                144, 146,
                160,  43,
                 35,  35,
                 10,  12,
                 10,  44,
                 10,  12,
                 10,  44,
                 10,  12,
                 10,  44,
                 10,  12,
                142, 142,
        };

        // 8, 17
        static byte[] bottomPassage = new byte[]
        {
                15, 5, 6, 15,
                140, 21, 22, 138,
                151, 139, 139, 152,
        };

        // 9, 0
        static byte[] topPassage = new byte[]
        {
                 171, 171,
                 147, 147,
                 46, 47,
                 53, 34,
                 69, 34,
        };

        // 9, 2 on top of topPassage
        static byte[] doorBlock = new byte[]
        {
                163, 164,
                176, 180,
                177, 181,
        };

        public override byte[,] generateRoom(bool rightPath, bool leftPath, bool topPath, bool bottomPath, bool door, Random r)
        {
            byte[] room = new byte[400];
            for (int i = 0; i < 400; i++)
            {
                room[i] = baseRoom[i];
            }

            if (rightPath)
            {
                injectData(room, rightPassage, 18, 3, 2);
            }
            if (leftPath)
            {
                injectData(room, leftPassage, 0, 3, 2);
            }
            if (bottomPath)
            {
                injectData(room, bottomPassage, 8, 17, 4);
            }
            if (topPath)
            {
                injectData(room, topPassage, 9, 0, 2);
            }
            else if (door)
            {
                injectData(room, topPassage, 9, 0, 2);
                injectData(room, doorBlock, 9, 2, 2);
            }

            byte[,] layer1 = new byte[20, 20];

            for (int yPos = 0; yPos < 20; yPos++)
            {
                for (int xPos = 0; xPos < 20; xPos++)
                {
                    layer1[xPos, yPos] = room[yPos * 20 + xPos];
                }
            }

            return layer1;
        }
    }
}
